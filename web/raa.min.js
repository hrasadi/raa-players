function makeSpectrum(t,e,a,n,r){function o(t){var e=d[t],a=u[t];return e>=a&&(a=e),(a-=.1)<0&&(a=0),a*=r,u[t]=a,a}function s(t){t=t||d;for(var e=0;e<n;e++)t[e]=Math.random();var a=(new Date).getMilliseconds()%10;t[0]=.2*t[0]+a/10*.8,n>1&&(t[1]=.3*t[1]+a/10*.7),n>2&&(t[2]=.5*t[2]+a/10*.5)}n=n||12,r=r||1,n<1&&(n=1),n>128&&(n=128);var l=document.getElementById(t),i=[];void 0===l&&alert("Element "+t+" not found!"),l.style.display="block",l.style.width=e+"px",l.style.height=a+"px",l.style.position="relative";var d=[],u=[],p=e/n|0,c=this;return this.setVolume=function(t){if(0===arguments.length)return r;t<0&&(t=0),t>1&&(t=1),r=t},this.setVolume(r),this.createSnapshot=function(){var t,e;s(d);for(var r=0;r<n;r++)t=o(r),(e=i[r].style).top=(a-a*t|0)+"px",e.height=(a*t|0)+"px"},s(u),function(){var e,r="";for(e=0;e<n;e++)r+='<div id="'+t+"_band"+e+'" ',r+='style="display:block;position:absolute;',r+="left:"+(e*p+1|0),r+="px;top:"+a,r+="px;width:"+(p-2),r+="px;height:0",r+='px;" class="band"></div>';for(l.innerHTML=r,e=0;e<n;e++){var o=document.getElementById(t+"_band"+e);i.push(o)}}(),setInterval(c.createSnapshot,100),this}var raa1Url="https://api.raa.media/linkgenerator/live.mp3?src=aHR0cHM6Ly9zdHJlYW0ucmFhLm1lZGlhL3JhYTEub2dn",raa1StatusUrl="https://raa.media/lineups/status.json",PlaybackManager=function(t,e){this.radioHasProgram=!1,this.cyclesInSameStatus=0,this.isPausedByUser=!1,this.loop=function(t,e){e=void 0===e||e,t.readServerStatus(e)},this.readServerStatus=function(t){self=this,$.get(raa1StatusUrl,function(e){title=e.currentProgram,e.isCurrentlyPlaying?self.radioHasProgram?self.cyclesInSameStatus++:(self.radioHasProgram=!0,self.cyclesInSameStatus=1):(nextBoxId=e.nextBoxId,nextBoxStartTime=moment(e.nextBoxStartTime),self.radioHasProgram?(self.radioHasProgram=!1,self.cyclesInSameStatus=1):self.cyclesInSameStatus++),self.decideRadioStatus(t)})},this.decideRadioStatus=function(a){this.radioHasProgram?t():(!this.radioHasProgram&&this.cyclesInSameStatus>1||!a)&&e()}};PlaybackManager.prototype.init=function(){self=this,this.loop(this,!1),setInterval(function(){self.loop(self)},1e4)};var generatePlayerButton=function(){return $("#player")[0].paused?'<img src="img/play-button.png" style="max-height: 50px">':'<img src="img/pause-button.png" style="max-height: 50px">'},flipPlaybackStatus=function(){$("#player")[0].paused?($("#player")[0].play(),playbackManager.isPausedByUser=!1):($("#player")[0].pause(),playbackManager.isPausedByUser=!0),$("#player-button").html(generatePlayerButton())},playbackManager=new PlaybackManager(function(){$("#player")[0].paused&&!playbackManager.isPausedByUser&&($("#player")[0].src=raa1Url,$("#player")[0].play()),downCounterMoment=null,"undefined"!=typeof downCounterIntervalId&&downCounterIntervalId>0&&(clearInterval(downCounterIntervalId),downCounterIntervalId=-1),$("#player-bar").html('<div class="col-xs-11 h5"><div class="row" style="padding-right:20px"><div id="equalizer" class="col-xs-4"/><div class="col-xs-8" style="padding-top: 10px"> در حال پخش: '+title+'</div></div></div><div id="player-button" class="col-xs-1" dir="ltr" style="padding:0px">   <script type="text/javascript">     $("#player-button").html(generatePlayerButton());     $("#player-button").on("click", function() {       flipPlaybackStatus();     });   <\/script></div>'),makeSpectrum("equalizer",20,20,3,0)},function(){"undefined"!=typeof downCounterMoment&&null!=downCounterMoment||(downCounterMoment=moment.duration(nextBoxStartTime.diff(moment())),downCounterIntervalId=setInterval(function(){if(downCounterMoment.subtract(1,"second"),downCounterMoment.asMilliseconds()<0)"undefined"!=typeof nextBoxId&&null!=nextBoxId?$("#player-bar").html('<div class="text-center h4" style="padding-top: 10px">به زودی: '+nextBoxId+"</div>"):$("#player-bar").html('<div class="text-center h4" style="padding-top: 10px">شب بخیر! ادامه‌ی برنامه‌های رادیو از نیمه شب...');else{var t='<div class="text-center h4" style="padding-top: 10px">'+nextBoxId+" در ";0!=downCounterMoment.hours()&&(t=t+downCounterMoment.hours()+" ساعت و "),0!=downCounterMoment.minutes()&&(t=t+downCounterMoment.minutes()+" دقیقه و "),t=t+downCounterMoment.seconds()+" ثانیه </div>",$("#player-bar").html(t)}},1e3))});playbackManager.init();
//# sourceMappingURL=raa.min.js.map